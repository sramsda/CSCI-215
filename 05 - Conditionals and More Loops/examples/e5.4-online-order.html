<html>
<head>
    <title>Welcome to CSCI-215!</title>
</head>
<body>
<h1>Online Order</h1>

<script type="text/Javascript">

    /*

        Nested Loops - Online order

        Write the following program using JavaScript:

            1. Prompt user to enter information related to an online order. The information includes a list of items
               (description, quantity, and cost) delimited by a semicolon ;
            2. Compute the total of the order (quantity * cost). Don't forget to include the sales tax of 4.5%.
            3. Display information about each item in the order as well as subtotal, tax, and the overall total.

        Example #1:
        Polo Shirt,3,23.99;Blue Jeans,2,49.99;Tennis Shoes,1,89.88

        Expected output:

        Use string templates to format the output below.

        ======================
         Online Order
        ======================
         Polo Shirt: $71.97
         Blue Jeans: $99.98
         Tennis Shoes: $89.88
        ======================
         Sub Total: $261.83
         Tax 4.5%: $11.78
        ======================
         Order Total: $273.61
        ======================

    */

    // input
    const TAX = .045; 
    let input = prompt("Enter Info:"); 

    document.write("======================<br/>");
    document.write("Online Order<br/>");
    document.write("======================<br/>");

    // calculations
    const lineItemArray = input.split(";"); 

    // subtotal accumulator 
    let subtotal = 0; 

    // loop through the array 
    for(let i = 0; i < lineItemArray.length; i++){

        // separate further by commas 
        let lineItemDetailArray = lineItemArray[i].split(","); 

        // the quantity of the item times the price
        let lineItemTotal = Number(lineItemDetailArray[1]) * Number(lineItemDetailArray[2]);

        // increment subtotal
        subtotal += lineItemTotal; 

        // output price and quantity
        document.write(`${lineItemDetailArray[0]}: $${lineItemTotal}<br/>`);
    }

    // output totals
    let taxAmount = subtotal * TAX; 
    let grandTotal = taxAmount + subtotal; 

    document.write(`Subtotal: $${subtotal} <br/>`); 
    document.write("======================<br/>");
    document.write(`Tax (4.5%): $${taxAmount.toFixed(2)} <br/>`); 
    document.write("======================<br/>");
    document.write(`Total: $${grandTotal.toFixed(2)} <br/>`); 



</script>
</body>
</html>